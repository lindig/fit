(executable
 (name main)
 (public_name fit)
 (modes native js)
 (modules build main)
 (libraries yojson cmdliner fit)
 (js_of_ocaml
  (flags
   (:standard
    ; General debugging flags (recommended for stack traces)
    --debug-info
    --no-inline
    --source-map
    ; The specific flag to automatically attach JS errors to OCaml exceptions
    --enable
    with-js-error))))

(executable
 (name srt)
 (public_name fit2srt)
 (modules srt build)
 (libraries yojson cmdliner fit ptime unix))

(rule
 (target build.ml)
 (deps (universe) build.sh)
 (action
  (with-stdout-to
   %{target}
   (bash "./build.sh"))))
